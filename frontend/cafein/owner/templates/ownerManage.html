{% extends "layout.html" %}
{% block content %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <main>
        <div>
            <div class="col contents-padding container">
                <h1>카페 관리</h1>
                <form action="/owner/update/" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div>
                        <a class="login-button btn btn-outline-brown float-end" href="/owner/delete" aria-expanded="false">수정</a>
                    </div>
                    <div class=blank></div>
                    <div class=contents-blank></div>
                    <div class='row'>
                        <div class='col'>
                            <div class='imagebox'>
                                <img id="img" src='\media\cafe\KakaoTalk_20221124_162600485_YjcA9QO.jpg' alt=''>
                                {% comment %} {% for image in form.images%}
                                    <img src="{{ image.url }}" />
                                {% endfor %} {% endcomment %}
                            </div>
                          {% comment %} <head>
                            <meta charset="UTF-8" />
                            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                            <meta http-equiv="X-UA-Compatible" content="ie=edge" />
                          </head> {% endcomment %}

                            
                        </div>    
                        <script>
                            function toggleImg(img) {
                              document.getElementById("img").src = img;
                            }
                        </script>
                        
                            <script>
                              function setThumbnail(event, id) {
                                var reader = new FileReader();
                            
                                reader.onload = function(event) {
                                  var img = document.createElement("img");
                                  img.setAttribute("src", event.target.result);
                                  img.setAttribute("class", "imagebox2");
                                  img.setAttribute("onclick", "toggleImg('"+event.target.result+"')");
                                  document.getElementById(id).innerHTML = "";
                                  document.querySelector("div#" + id).appendChild(img);
                                };
                            
                                reader.readAsDataURL(event.target.files[0]);
                              }
                            </script>
                            <meta charset="UTF-8">
                            <title>jQuery .slideUp() </title>
                            <script>
                                $( document ).ready( function() {
                                  $( '#btn' ).on("click", function() {
                                    $( '.wrap' ).slideToggle();
                                  } );
                                } );
                            </script>

                        <div class='col'>
                            {{ form.name }}
                            <div class=contents-blank></div>
                            <div>
                                <button id="btn">이미지 선택</button>
                                <div id="divBox" class='wrap'>
                                    <div class='row'>
                                        <div class='col'>
                                            <input type="file" id="image" accept="image/*" onchange="setThumbnail(event, 'image_container_1');"/>
                                            <div id="image_container_1">
                                                <img id="img" src='\media\cafe\KakaoTalk_20221124_162600485_YjcA9QO.jpg' class='imagebox2' onclick="toggleImg('/media/cafe/KakaoTalk_20221124_162600485_YjcA9QO.jpg')" alt=''>
                                            </div>
                                        </div>
                                        <div class='col'>
                                            <input type="file" id="image" accept="image/*" onchange="setThumbnail(event, 'image_container_2');"/>
                                            <div id="image_container_2"></div>
                                        </div>
                                        <div class='col'>
                                            <input type="file" id="image" accept="image/*" onchange="setThumbnail(event, 'image_container_3');"/>
                                            <div id="image_container_3"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {{ form.address }}
                            {{ form.address2 }}
                            {{ form.cafe_phone }}
                            {{ form.human }}
                        </div>
                    </div>
                </form>
                <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                <script>
                window.onload = function(){
                    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
                        //카카오 지도 발생
                        new daum.Postcode({
                            oncomplete: function(data) { //선택시 입력값 세팅
                                document.getElementById("address_kakao").value = data.address; // 주소 넣기
                                document.querySelector("input[name=address2]").focus(); //상세입력 포커싱
                            }
                        }).open();
                    });
                }
                </script>
            </div>
        </div>
    </main>
{% endblock %}